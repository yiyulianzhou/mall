<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class seller extends MY_Controller
{

    public function __construct()
    {
        parent::__construct();
    }
    public function index()
    {
		$this->display($this->data['file_path']);
    }
    /**
     * @DateTime  2017-12-20
     * @copyright 卖家解封与封禁
     * @return    [type]      [description]
     */
    public function lock()
    {
    	$id = $this->input->get('id');
        $lock = $this->input->get('lock');
        $shop = $this->input->get('shop');
    	$title = $this->input->get('title');
    	$page = $this->input->get('per_page');
    	$res = $this->model->sellerLock( $id, $lock );
    	redirect("seller/index?per_page=$page&shop=$shop&title=$title");
    }
    /**
     * @copyright 卖家详情
     * @return    [type]      [description]
     */
    public function detail(){
    	$id = $this->input->get( 'id' );
        $page = $this->input->get('per_page');
        $shop = $this->input->get('shop');
        $title = $this->input->get('title');
        $lock = $this->input->get('lock');
        $res = $this->model->sellerDetail( $id );
        $this->assign('detail',$res);
        $this->assign('page',$page);
        $this->assign('shop',$shop);
        $this->assign('title',$title);
        $this->assign('lock',$lock);
        $this->display($this->data['file_path']);
    }
    /**
     * @copyright 店铺审核
     * @return    [type]      [description]
     */
    public function verify()
    {
        $page = $this->input->post('page');
        $id = $this->input->post('id');
        $is_real = $this->input->post('is_real');
        $is_health = $this->input->post('is_health');
        $shop = $this->input->post('shop');
        $title = $this->input->post('title');
        $lock = $this->input->post('lock');
        $res = $this->model->sellerVerify( $id, $is_real, $is_health );
        redirect("seller/index?per_page=$page&shop=$shop&title=$title&lock=$lock");
    }

    /**
     * @copyright 卖家顶部统计数据
     * @return    [type]      [description]
     */

    public function countSeller()
    {
        $this->response['count'] = $this->model->countSeller();

        if ($this->response['count']){
            $this->response['msg_type'] = 'success';
            $this->response['message'] = '获取卖家顶部统计成功';
        }
        $this->returnResponse();
    }



    /**
     * @copyright 卖家列表数据
     * @return    [type]      [description]
     */

    public function getSellerList()
    {
        $this->response = $this->model->getSellerList();

        if ($this->response){
            $this->response['msg_type'] = 'success';
            $this->response['message'] = '获取卖家顶部统计成功';
        }
        $this->returnResponse();
    }

    /**
     * @copyright 卖家销售额统计数据
     * @return    [type]      [description]
     */

    public function getSellerSales()
    {
        $search = $this->input->post();

        $this->response['echarts_data'] = $this->model->getSellerSales($search);

        if ($this->response){
            $this->response['msg_type'] = 'success';
            $this->response['message'] = '获取卖家销售统计成功';
        }
        $this->returnResponse();

    }

    /**
     * @copyright 卖家用户统计数据
     * @return    [type]      [description]
     */

    public function getSellerUsers()
    {
        $this->response['echarts_data'] = $this->model->getSellerUsers();

        if ($this->response){
            $this->response['msg_type'] = 'success';
            $this->response['message'] = '获取卖家用户统计成功';
        }
        $this->returnResponse();
    }

}