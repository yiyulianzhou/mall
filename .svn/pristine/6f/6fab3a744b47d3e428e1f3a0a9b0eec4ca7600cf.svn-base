<?php

/**
 * @Description: 首页模型
 */
class HomeModel extends MY_Model
{

    public function __construct()
    {
        parent::__construct();
    }

    /**
     * @function getData 各表新增数据汇总
     * @return   array $data   结果集
     */
    public function getData()
    {
    	$data = ['buyer'=>0, 'seller'=>0, 'order'=>0, 'goods'=>0];

    	// 新增买家
    	$this->db->select('count(*) as buyer');
        $this->db->from('user');
        $today = strtotime(date('Y-m-d'));
        $this->db->where('create_time >= ', $today);
        $tmp = $this->db->get()->row_array();

        $data['buyer'] = $tmp['buyer'];
        $this->db->reset_query();

        // 新增卖家
    	$this->db->select('count(*) as seller');
        $this->db->from('user_shop');
        $this->db->where('create_time >= ', $today);
        $tmp = $this->db->get()->row_array();
        $data['seller'] = $tmp['seller'];
        $this->db->reset_query();

        // 新增订单
    	$this->db->select('count(*) as orders');
        $this->db->from('order');
        $this->db->where('create_time >= ', $today);
        $tmp = $this->db->get()->row_array();
        $data['order'] = $tmp['orders'];
        $this->db->reset_query();

        // 新增商品
        $this->db->select('count(*) as goods');
        $this->db->from('goods');
        $this->db->where('add_time >= ', $today);
        $tmp = $this->db->get()->row_array();
        $data['goods'] = $tmp['goods'];
        $this->db->reset_query();
        return $data;
    }
    public function showLine(){
        $res = Array
        (
            'days' => Array
            (
                0 => '01-24',
                1 => '01-25',
                2 => '01-26',

            ),

        'shop' => Array
            (
                0 => 0,
                1 => 0,
                2 => 0,
            ),

        'district' => Array
            (
                0 => 0,
                1 => 0,
                2 => 0,

            ) ,

        'type' => Array
            (
                0 => 0,
                1 => 0,
                2 => 0,
            ),

        'money' => Array
            (
                0 => 0,
                1 => 0,
                2 => 0

            )

    );
        return $res;
    }

}
